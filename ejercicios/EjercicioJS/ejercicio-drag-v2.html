<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicio de drag</title>
    <style>
        #div1,
        #div2,
        #div3 {
            float: left;
            width: 150px;
            height: 50px;
            margin: 10px;
            border: 1px solid black;
            display: inline-block;
            background-color: red;
        }
    </style>

</head>

<body>

    <h1>Ejercicios de drag </h1>

    <h5>Enlace del ejercicio https://github.com/pepesan/ejemplos-html5/edit/master/ejercicios/drag.js </h5>
    <ul>
        <li>OK: 1.- Crea un fichero HTML con un fichero JS asociado > OK </li>
        <li>OK: 2.- Crea un div contenedor que tenag 3 divs dentro > OK </li>
        <li>OK: 3.- Pinta los 3 divs para que quepan los tres a la vez a la misma altura y tengan fondo rojo OK</li>
        <li>OK: 4.- El primer div será arratrable, comprueba que se puede arrastrar > OK</li>
        <li>OK: 5.- asigna el evento dragstart al primer div, asócialo con una función llamada empezando > OK </li>
        <li>OK: 6.- dentro de la función empezando recuerda mandar un dato con el índice "iden" y con el valor del identificativo del primer div (setData) OK </li>
        <li>OK: 7.- Haz que cuando se haya entrado en el segundo div saque un mensaje por consola (arrastrando) > OK </li>
        <li>OK: 8.- Haz que cuando se haya salido del segundo div saque un mensaje por consola</li>
        <li>???? 9.- Haz que cuando se pasee sobre el tercer div anule el comportamiento por defecto (arrastrando) >>> ???? </li>
        <li>10.- Haz cuando se suelte el arrastrable (drop) en el tercer párrafo, anula el comportamiento por defecto y saca un mensaje por pantalla</li>
        <li>OK: 11.- En la función anterior saca por pantalla el identificativo del div que se haya mandado en el dragstart > OK</li>
    </ul>

    <div id="div1" draggable="true">
        Div 1 Arrastrable
    </div>

    <div id="div2">
        Div 2
    </div>

    <div id="div3">
        Div 3
    </div>

    <script>
        function registrar() {
            console.log("registrado");
        }

        function empezando(event) {
            console.log("empezando");
            //transfiriendo datos
            var data = event.target.id;
            event.dataTransfer.setData("iden", data);
        }

        function entrar() {
            console.log("entrado");
        }

        function arrastrando(event) {
            console.log("arrastrando");
            //evitando problemas al soltar
            event.preventDefault();
        }

        function arrastrando2(event) {
            console.log("arrastrando en div3");
            //evitando problemas al soltar
            event.preventDefault();
        }

        function salir() {
            console.log("salido");
        }

        function soltar(event) {
            console.log("Soltado");
            //evitando problemas al soltar
            event.preventDefault();
            //cogiendo datos

        }

        function soltar2(event) {
            console.log("Soltado en div3");
            //evitando problemas al soltar
            event.preventDefault();
            //cogiendo datos
            var data = event.dataTransfer.getData("iden");
            var midiv = document.getElementById("div3");
            console.log(midiv);
            midiv.innerHTML += "<p>" + data + "</p>";
        }

        function init() {
            console.log("Dom cargado");
            var div1 = document.getElementById("div1");
            var div2 = document.getElementById("div2");
            var div3 = document.getElementById("div3");
            div1.addEventListener("dragstart", empezando);
            //c2.addEventListener("dragenter",entrar);
            div2.addEventListener("dragover", arrastrando);
            div3.addEventListener("dragover", arrastrando2); //si no hay over no hay drop
            div2.addEventListener("dragleave", salir);
            div2.addEventListener("drop", soltar);
            div3.addEventListener("drop", soltar2);
        }
        document.addEventListener("DOMContentLoaded", init);
    </script>


</body>

</html>
